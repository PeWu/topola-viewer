(this["webpackJsonptopola-viewer"]=this["webpackJsonptopola-viewer"]||[]).push([[0],{235:function(e){e.exports=JSON.parse('{"menu.open":"\xd6ffnen","menu.open_file":"Datei \xf6ffnen","menu.load_from_url":"URL \xf6ffnen","menu.select_wikitree_id":"WikiTree ID ausw\xe4hlen","menu.print":"Print","menu.download":"Download","menu.pdf_file":"PDF-Datei","menu.png_file":"PNG-Datei","menu.svg_file":"SVG-Datei","menu.download_pdf":"PDF herunterladen","menu.download_png":"PNG herunterladen","menu.download_svg":"SVG herunterladen","menu.view":"View","menu.hourglass":"Sanduhrkarte","menu.relatives":"Alle Verwandten","menu.fancy":"Zierbaum (experimentell)","menu.wikitree_login":"Bei WikiTree anmelden","menu.wikitree_logged_in":"Eingeloggt","menu.wikitree_popup_username":"Bei WikiTree als {username} angemeldet","menu.wikitree_popup":"Bei WikiTree angemeldet","menu.github":"Projekt auf der GitHub-Website","menu.search.placeholder":"Person suchen","menu.search.no_results":"Keine Ergebnisse","intro.title":"Topola Genealogie","intro.description":"Mit der Topola Genealogie k\xf6nnen Sie den Stammbaum auf interaktive Weise durchsuchen.","intro.instructions":"Klicken Sie auf Datei \xf6ffnen oder URL \xf6ffnen, um eine GEDCOM-Datei zu laden. Die meisten Genealogie-Programme verf\xfcgen \xfcber eine GEDCOM-Exportfunktion.","intro.examples":"Nachfolgend einige Beispiele aus dem Internet:","intro.from":"source:","intro.privacy":"Datenschutz","intro.privacy_note":"Bei Verwendung der Funktion \\"Datei \xf6ffnen\\" werden Ihre Daten nirgendwo gesendet und verbleiben auf Ihrem Computer. Bei Verwendung der Funktion \\"URL \xf6ffnen\\" werden Daten von der angegebenen Adresse vom Dienst {link} an gesendet Erm\xf6glichen des Ladens von Daten aus einer anderen Dom\xe4ne (CORS).","load_from_url.title":"Von URL \xf6ffnen","load_from_url.comment":"Die Daten der angegebenen URL werden \xfcber den {link} -Dienst geladen, um CORS-Probleme zu vermeiden.","load_from_url.cancel":"Cancel","load_from_url.load":"\xd6ffnen","select_wikitree_id.title":"WikiTree ID eingeben","select_wikitree_id.comment":"Geben Sie die Profil-ID {wikiTreeLink} ein. Beispiele: {example1}, {example2}","select_wikitree_id.cancel":"Cancel","select_wikitree_id.load":"Open","gedcom.BAPM":"Taufe","gedcom.BIRT":"Geburt","gedcom.BURI":"Beerdigung","gedcom.CENS":"Volksz\xe4hlung","gedcom.CHR":"Taufe","gedcom.DEAT":"Tod","gedcom.DSCR":"Beschreibung","gedcom.EMAIL":"E-Mail","gedcom.EVEN":"Ereignis","gedcom.OCCU":"Beruf","gedcom.RIN":"ID","gedcom.TITL":"Titel","gedcom.WWW":"Website","gedcom._UPD":"Zuletzt aktualisiert","date.abt":"about","date.cal":"berechnet","date.est":"gesch\xe4tzt","date.between":"zwischen {from} und {to}","date.after":"after {from}","date.before":"before {to}","error.error":"Error","error.failed_pdf":"PDF konnte nicht erstellt werden. Versuchen Sie es erneut mit einem kleineren Diagramm oder laden Sie die SVG-Datei herunter.","error.failed_png":"Fehler beim Erstellen der PNG-Datei. Versuchen Sie es erneut mit einem kleineren Diagramm oder laden Sie die SVG-Datei herunter.","error.failed_to_load_file":"Fehler beim Laden der Datei","error.failed_wikitree_load_more":"Fehler beim Abrufen der Daten aus WikiTree. {error}","wikitree.private":"Privat"}')},236:function(e){e.exports=JSON.parse('{"menu.open":"Ouvrir","menu.open_file":"Ouvrir le fichier","menu.load_from_url":"Ouvrir l\'URL","menu.select_wikitree_id":"S\xe9lectionnez l\'ID WikiTree","menu.print":"Imprimer","menu.download":"T\xe9l\xe9charger","menu.pdf_file":"Fichier PDF","menu.png_file":"Fichier PNG","menu.svg_file":"Fichier SVG","menu.download_pdf":"T\xe9l\xe9charger le PDF","menu.download_png":"T\xe9l\xe9charger PNG","menu.download_svg":"T\xe9l\xe9charger SVG","menu.view":"Afficher","menu.hourglass":"Graphique en sablier","menu.relatives":"Tous les parents","menu.fancy":"Arbre ornemental (exp\xe9rimental)","menu.wikitree_login":"Connectez-vous \xe0 WikiTree","menu.wikitree_logged_in":"Connect\xe9","menu.wikitree_popup_username":"Connect\xe9 \xe0 WikiTree en tant que {username}","menu.wikitree_popup":"Connect\xe9 \xe0 WikiTree","menu.github":"Projet sur le site Web GitHub","menu.search.placeholder":"Rechercher une personne","menu.search.no_results":"Aucun r\xe9sultat","intro.title":"Topola G\xe9n\xe9alogie","intro.description":"La Topola G\xe9n\xe9alogie vous permet de parcourir l\'arbre g\xe9n\xe9alogique de mani\xe8re interactive.","intro.instructions":"Cliquez sur OPEN FILE ou OPEN URL pour charger un fichier GEDCOM. La plupart des logiciels de g\xe9n\xe9alogie ont une fonction d\'exportation GEDCOM.","intro.examples":"Voici quelques exemples trouv\xe9s sur Internet:","intro.from":"source:","intro.privacy":"Confidentialit\xe9","intro.privacy_note":"Lorsque vous utilisez la fonction \\"Ouvrir un fichier\\", vos donn\xe9es ne sont envoy\xe9es nulle part et restent sur votre ordinateur. Lorsque vous utilisez la fonction \\"Ouvrir l\'URL\\", les donn\xe9es de l\'adresse indiqu\xe9e sont envoy\xe9es par le service {link} \xe0 permettant le chargement des donn\xe9es depuis un autre domaine (CORS).","load_from_url.title":"Ouvrir depuis l\'URL","load_from_url.comment":"Les donn\xe9es de l\'URL donn\xe9e seront charg\xe9es via le service {link} pour \xe9viter les probl\xe8mes CORS.","load_from_url.cancel":"Annuler","load_from_url.load":"Ouvrir","select_wikitree_id.title":"Entrez l\'ID de WikiTree","select_wikitree_id.comment":"Entrez l\'ID de profil {wikiTreeLink}. Exemples: {example1}, {example2}","select_wikitree_id.cancel":"Annuler","select_wikitree_id.load":"Ouvrir","gedcom.BAPM":"Bapt\xeame","gedcom.BIRT":"Naissance","gedcom.BURI":"Fun\xe9railles","gedcom.CENS":"Recensement","gedcom.CHR":"Bapt\xeame","gedcom.DEAT":"Mort","gedcom.DSCR":"Description","gedcom.EMAIL":"E-mail","gedcom.EVEN":"\xc9v\xe9nement","gedcom.OCCU":"Profession","gedcom.RIN":"ID","gedcom.TITL":"Titre","gedcom.WWW":"Site Web","gedcom._UPD":"Derni\xe8re mise \xe0 jour","date.abt":"environ","date.cal":"calcul\xe9","date.est":"estim\xe9","date.between":"entre {from} et {to}","date.after":"apr\xe8s {from}","date.before":"avant {to}","error.error":"Erreur","error.failed_pdf":"\xc9chec de la cr\xe9ation du PDF. R\xe9essayez avec un diagramme plus petit ou t\xe9l\xe9chargez le fichier SVG.","error.failed_png":"Impossible de cr\xe9er le fichier PNG. R\xe9essayez avec un diagramme plus petit ou t\xe9l\xe9chargez le fichier SVG.","error.failed_to_load_file":"Erreur lors du chargement du fichier","error.failed_wikitree_load_more":"Erreur lors de l\'obtention des donn\xe9es de WikiTree. {error}","wikitree.private":"Priv\xe9"}')},237:function(e){e.exports=JSON.parse('{"menu.open":"Apri","menu.open_file":"Apri file","menu.load_from_url":"Apri URL","menu.select_wikitree_id":"Seleziona ID WikiTree","menu.print":"Stampa","menu.download":"Download","menu.pdf_file":"File PDF","menu.png_file":"File PNG","menu.svg_file":"File SVG","menu.download_pdf":"Scarica PDF","menu.download_png":"Scarica PNG","menu.download_svg":"Scarica SVG","menu.view":"Visualizza","menu.hourglass":"Grafico a clessidra","menu.relatives":"Tutti i parenti","menu.fancy":"Albero ornamentale (sperimentale)","menu.wikitree_login":"Accedi a WikiTree","menu.wikitree_logged_in":"Accesso effettuato","menu.wikitree_popup_username":"Accesso a WikiTree come {username}","menu.wikitree_popup":"Accesso a WikiTree","menu.github":"Progetto sul sito web GitHub","menu.search.placeholder":"Cerca persona","menu.search.no_results":"Nessun risultato","intro.title":"Topola Genealogy","intro.description":"Topola Genealogy ti consente di esplorare l\'albero genealogico in modo interattivo.","intro.instructions":"Fai clic su OPEN FILE o OPEN URL per caricare un file GEDCOM. La maggior parte dei software di genealogia ha una funzione di esportazione GEDCOM.","intro.examples":"Di seguito sono riportati alcuni esempi trovati su Internet:","intro.from":"source:","intro.privacy":"Privacy","intro.privacy_note":"Quando si utilizza la funzione \\"Apri file\\", i dati non vengono inviati da nessuna parte e rimangono sul computer. Quando si utilizza la funzione \\"Apri URL\\", i dati dall\'indirizzo specificato vengono inviati dal servizio {link} a consentire il caricamento dei dati da un altro dominio (CORS).","load_from_url.title":"Apri da URL","load_from_url.comment":"I dati dall\'URL specificato verranno caricati tramite il servizio {link} per evitare problemi CORS.","load_from_url.cancel":"Annulla","load_from_url.load":"Apri","select_wikitree_id.title":"Inserisci ID WikiTree","select_wikitree_id.comment":"Inserisci l\'ID profilo {wikiTreeLink}. Esempi: {example1}, {example2}","select_wikitree_id.cancel":"Annulla","select_wikitree_id.load":"Apri","gedcom.BAPM":"Battesimo","gedcom.BIRT":"Nascita","gedcom.BURI":"Funerale","gedcom.CENS":"Census","gedcom.CHR":"Battesimo","gedcom.DEAT":"Death","gedcom.DSCR":"Descrizione","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Evento","gedcom.OCCU":"Professione","gedcom.RIN":"ID","gedcom.TITL":"Titolo","gedcom.WWW":"Sito web","gedcom._UPD":"Ultimo aggiornamento","date.abt":"about","date.cal":"calcolato","date.est":"stimato","date.between":"tra {from} e {to}","date.after":"after {from}","date.before":"before {to}","error.error":"Error","error.failed_pdf":"Impossibile creare PDF. Riprova con un diagramma pi\xf9 piccolo o scarica il file SVG.","error.failed_png":"Impossibile creare il file PNG. Riprova con un diagramma pi\xf9 piccolo o scarica il file SVG.","error.failed_to_load_file":"Errore durante il caricamento del file","error.failed_wikitree_load_more":"Errore durante il recupero dei dati da WikiTree. {error}","wikitree.private":"Privato"}')},238:function(e){e.exports=JSON.parse('{"menu.open":"Otw\xf3rz","menu.open_file":"Otw\xf3rz plik","menu.load_from_url":"Otw\xf3rz URL","menu.select_wikitree_id":"Wybierz WikiTree ID","menu.print":"Drukuj","menu.download":"Pobierz","menu.pdf_file":"Plik PDF","menu.png_file":"Plik PNG","menu.svg_file":"Plik SVG","menu.download_pdf":"Pobierz PDF","menu.download_png":"Pobierz PNG","menu.download_svg":"Pobierz SVG","menu.view":"Widok","menu.hourglass":"Wykres klepsydrowy","menu.relatives":"Wszyscy krewni","menu.fancy":"Ozdobne drzewo (eksperymentalne)","menu.wikitree_login":"Zaloguj do WikiTree","menu.wikitree_logged_in":"Zalogowano","menu.wikitree_popup_username":"Zalogowano do WikiTree jako {username}","menu.wikitree_popup":"Zalogowano do WikiTree","menu.github":"Projekt na stronie GitHub","menu.search.placeholder":"Szukaj osoby","menu.search.no_results":"Brak wynik\xf3w","intro.title":"Topola Genealogy","intro.description":"Topola Genealogy pozwala przegl\u0105da\u0107 drzewo genealogiczne w interaktywny spos\xf3b.","intro.instructions":"Kliknij OTW\xd3RZ PLIK lub OTW\xd3RZ URL, aby za\u0142adowa\u0107 plik GEDCOM. Wi\u0119kszo\u015b\u0107 program\xf3w genealogicznych posiada funkcj\u0119 eksportu do pliku GEDCOM.","intro.examples":"Poni\u017cej jest kilka przyk\u0142ad\xf3w znalezionych w Internecie:","intro.from":"\u017ar\xf3d\u0142o:","intro.privacy":"Prywatno\u015b\u0107","intro.privacy_note":"U\u017cywaj\u0105c funkcji \\"Otw\xf3rz plik\\", Twoje dane nie s\u0105 nigdzie wysy\u0142ane i pozostaj\u0105 na Twoim komputerze. U\u017cywaj\u0105c funkcji \\"Otw\xf3rz URL\\", dane z podanego adresu przesy\u0142ane s\u0105 przez us\u0142ug\u0119 {link} w celu umo\u017cliwienia za\u0142adowania danych z innej domeny (CORS).","load_from_url.title":"Otw\xf3rz z adresu URL","load_from_url.comment":"Dane z podanego adresu URL zostan\u0105 za\u0142adowane poprzez us\u0142ug\u0119 {link} w celu unikni\u0119cia problem\xf3w z CORS.","load_from_url.cancel":"Anuluj","load_from_url.load":"Otw\xf3rz","select_wikitree_id.title":"Podaj WikiTree ID","select_wikitree_id.comment":"Wpisz identyfikator profilu {wikiTreeLink}. Przyk\u0142ady: {example1}, {example2}","select_wikitree_id.cancel":"Anuluj","select_wikitree_id.load":"Otw\xf3rz","gedcom.BAPM":"Chrzest","gedcom.BIRT":"Narodziny","gedcom.BURI":"Pogrzeb","gedcom.CENS":"Spis ludno\u015bci","gedcom.CHR":"Chrzest","gedcom.DEAT":"\u015amier\u0107","gedcom.DSCR":"Opis","gedcom.EDUC":"Wykszta\u0142cenie","gedcom.EMAIL":"E-mail","gedcom.EVEN":"Wydarzenie","gedcom.FACT":"Fakt","gedcom.MILT":"S\u0142u\u017cba wojskowa","gedcom.OCCU":"Zaw\xf3d","gedcom.RIN":"ID","gedcom.TITL":"Tytu\u0142","gedcom.WWW":"Strona WWW","gedcom._UPD":"Ostatnia aktualizacja","date.abt":"oko\u0142o","date.cal":"wyliczone","date.est":"oszacowane","date.between":"mi\u0119dzy {from} a {to}","date.after":"po {from}","date.before":"przed {to}","error.error":"B\u0142\u0105d","error.failed_pdf":"Nie uda\u0142o si\u0119 utworzy\u0107 pliku PDF. Spr\xf3buj jeszcze raz z mniejszym diagramem lub pobierz plik SVG.","error.failed_png":"Nie uda\u0142o si\u0119 utworzy\u0107 pliku PNG. Spr\xf3buj jeszcze raz z mniejszym diagramem lub pobierz plik SVG.","error.failed_to_load_file":"B\u0142\u0105d wczytywania pliku","error.failed_wikitree_load_more":"B\u0142\u0105d podczas pobierania danych z WikiTree. {error}","error.GEDCOM_READ_FAILED":"B\u0142\u0105d wczytywania pliku GEDCOM","error.ERROR_LOADING_UPLOADED_FILE":"B\u0142\u0105d wczytywania danych. Otw\xf3rz ponownie plik.","error.WIKITREE_ID_NOT_PROVIDED":"Identyfikator WikiTree nie zosta\u0142 podany","error.WIKITREE_PROFILE_NOT_ACCESSIBLE":"Profil WikiTree {id} nie jest dost\u0119pny","error.WIKITREE_PROFILE_NOT_FOUND":"Profil WikiTree {id} nie istnieje","wikitree.private":"Prywatne"}')},239:function(e){e.exports=JSON.parse('{"menu.open":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c","menu.open_file":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0430\u0439\u043b","menu.load_from_url":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c URL","menu.select_wikitree_id":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 WikiTree ID","menu.print":"\u041f\u0435\u0447\u0430\u0442\u044c","menu.download":"\u0421\u043a\u0430\u0447\u0430\u0442\u044c","menu.pdf_file":"\u0424\u0430\u0439\u043b PDF","menu.png_file":"\u0424\u0430\u0439\u043b PNG","menu.svg_file":"\u0424\u0430\u0439\u043b SVG","menu.download_pdf":"\u0421\u043a\u0430\u0447\u0430\u0442\u044c PDF","menu.download_png":"\u0421\u043a\u0430\u0447\u0430\u0442\u044c PNG","menu.download_svg":"\u0421\u043a\u0430\u0447\u0430\u0442\u044c SVG","menu.view":"\u0412\u0438\u0434","menu.hourglass":"\u0413\u0440\u0430\u0444\u0438\u043a \u041f\u0435\u0441\u043e\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u044b","menu.relatives":"\u0412\u0441\u0435 \u0440\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u043a\u0438","menu.fancy":"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0435 \u0434\u0435\u0440\u0435\u0432\u043e (\u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0435))","menu.wikitree_login":"\u0412\u043e\u0439\u0442\u0438 \u0432 WikiTree","menu.wikitree_logged_in":"\u0412\u0445\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d","menu.wikitree_popup_username":"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u0432 WikiTree \u043a\u0430\u043a {username}","menu.wikitree_popup":"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u0432 WikiTree","menu.github":"\u041f\u0440\u043e\u0435\u043a\u0442 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 GitHub","menu.search.placeholder":"\u0418\u0441\u043a\u0430\u0442\u044c \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","menu.search.no_results":"\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432","intro.title":"Topola Genealogy","intro.description":"Topola Genealogy \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0441\u0435\u043c\u0435\u0439\u043d\u043e\u0435 \u0434\u0440\u0435\u0432\u043e \u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435.","intro.instructions":"\u0429\u0435\u043b\u043a\u043d\u0438\u0442\u0435 \\"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0430\u0439\u043b\\" \u0438\u043b\u0438 \\"\u041e\u0442\u043a\u0440\u044b\u0442\u044c URL\\", \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b GEDCOM. \u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0430\u043b\u043e\u0433\u0438\u0438 \u0438\u043c\u0435\u044e\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430 GEDCOM.","intro.examples":"\u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b, \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u0432 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0435:","intro.from":"\u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a:","intro.privacy":"\u041a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c","intro.privacy_note":"\u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \\"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0444\u0430\u0439\u043b\\" \u0412\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0438\u043a\u0443\u0434\u0430 \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0438 \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u0412\u0430\u0448\u0435\u043c \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0435. \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \\"\u041e\u0442\u043a\u0440\u044b\u0442\u044c URL\\" \u0434\u0430\u043d\u043d\u044b\u0435 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0441\u043b\u0443\u0436\u0431\u043e\u0439 {link} \u043d\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430 (CORS).","load_from_url.title":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441 \u0430\u0434\u0440\u0435\u0441\u0430 URL","load_from_url.comment":"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430 URL \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b \u0447\u0435\u0440\u0435\u0437 \u0441\u043b\u0443\u0436\u0431\u0443 {link}, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c CORS.","load_from_url.cancel":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","load_from_url.load":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c","select_wikitree_id.title":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 WikiTree","select_wikitree_id.comment":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f {wikiTreeLink}. \u041f\u0440\u0438\u043c\u0435\u0440\u044b: {example1}, {example2}","select_wikitree_id.cancel":"\u041e\u0442\u043c\u0435\u043d\u0430","select_wikitree_id.load":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c","gedcom.ADOP":"\u0423\u0441\u044b\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435","gedcom.BAPM":"\u041a\u0440\u0435\u0449\u0435\u043d\u0438\u0435","gedcom.BIRT":"\u0420\u043e\u0436\u0434\u0435\u043d\u0438\u0435","gedcom.BURI":"\u041f\u043e\u0445\u043e\u0440\u043e\u043d\u044b","gedcom.CENS":"\u041f\u0435\u0440\u0435\u043f\u0438\u0441\u044c \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f","gedcom.CHR":"\u041a\u0440\u0435\u0449\u0435\u043d\u0438\u0435","gedcom.CREM":"\u041a\u0440\u0435\u043c\u0430\u0446\u0438\u044f","gedcom.DEAT":"\u0421\u043c\u0435\u0440\u0442\u044c","gedcom.DSCR":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","gedcom.EDUC":"\u041e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435","gedcom.EMAIL":"E-mail","gedcom.EMIG":"\u042d\u043c\u0438\u0433\u0440\u0430\u0446\u0438\u044f","gedcom.EVEN":"\u0421\u043e\u0431\u044b\u0442\u0438\u0435","gedcom.FACT":"\u0424\u0430\u043a\u0442","gedcom.IMMI":"\u0418\u043c\u043c\u0438\u0433\u0440\u0430\u0446\u0438\u044f","gedcom.MILT":"\u0412\u043e\u0435\u043d\u043d\u0430\u044f \u0441\u043b\u0443\u0436\u0431\u0430","gedcom.NATU":"\u041d\u0430\u0442\u0443\u0440\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f","gedcom.OCCU":"\u0412\u0438\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438","gedcom.RIN":"ID","gedcom.TITL":"\u0422\u0438\u0442\u0443\u043b","gedcom.WWW":"\u0412\u0435\u0431-\u0441\u0430\u0439\u0442 WWW","gedcom._UPD":"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435","date.abt":"\u043e\u043a\u043e\u043b\u043e","date.cal":"\u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u043d\u043e","date.est":"\u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e","date.between":"\u043c\u0435\u0436\u0434\u0443 {from} \u0438 {to}","date.after":"\u043f\u043e\u0441\u043b\u0435 {from}","date.before":"\u0434\u043e {to}","error.error":"\u041e\u0448\u0438\u0431\u043a\u0430","error.failed_pdf":"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c PDF-\u0444\u0430\u0439\u043b. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u0441 \u043c\u0435\u043d\u044c\u0448\u0435\u0439 \u0434\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u043e\u0439 \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b SVG.","error.failed_png":"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b PNG. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u0441 \u043c\u0435\u043d\u044c\u0448\u0435\u0439 \u0441\u0445\u0435\u043c\u043e\u0439 \u0438\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b SVG.","error.failed_to_load_file":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430","error.failed_wikitree_load_more":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 WikiTree. {error}}","wikitree.private":"\u0427\u0430\u0441\u0442\u043d\u044b\u0439"}')},240:function(e,t){},278:function(e,t){},284:function(e,t){},325:function(e,t){},382:function(e,t,n){},385:function(e,t,n){"use strict";n.r(t);var r=n(32),a=n(229),i=n(230),o=n(231),s=n(232),c=n(233),u=n(234),l=n(0),d=n(78),p=n(235),h=n(236),f=n(237),m=n(238),g=n(239),j=n(10),b=n(23),O=n(9),v=n.n(O),w=n(16),k=n(13),x=n(14),_=n(18),y=n(19),D=n(25),T=n(31);function E(e,t){window.gtag("event",e,t)}var I,S=n(143),R=n(62),M=n(127),N=n(88),L=n(413),C=n(191),A=n(126),P=(n(89),n(45)),W=n(1);function z(e,t){var n=Object(S.a)("#svgContainer").node(),r=t.transform.k,a=Object(M.a)([0,(n.clientWidth-e[0]*r)/2]),i=Object(M.a)([0,(n.clientHeight-e[1]*r)/2]);Object(S.a)("#chartSvg").attr("width",e[0]*r).attr("height",e[1]*r).attr("transform","translate(".concat(a,", ").concat(i,")")),Object(S.a)("#chart").attr("transform","scale(".concat(r,")")),n.scrollLeft=-t.transform.x,n.scrollTop=-t.transform.y}function G(){var e=Object(S.a)("#svgContainer").node(),t=e.scrollLeft+e.clientWidth/2,n=e.scrollTop+e.clientHeight/2,r=Object(A.b)(e).k;Object(S.a)(e).call(Object(A.a)().translateTo,t/r,n/r)}function F(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e,n){t.onload=function(t){return e(t.target.result)}}))}function U(e){return B.apply(this,arguments)}function B(){return(B=Object(w.a)(v.a.mark((function e(t){var n,r,a,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.href.baseVal){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch(n);case 6:return r=e.sent,e.next=9,r.blob();case 9:return a=e.sent,e.next=12,F(a);case 12:i=e.sent,t.href.baseVal=i,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.warn("Failed to load image:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}function H(e){return V.apply(this,arguments)}function V(){return(V=Object(w.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t.getElementsByTagName("image")),e.next=3,Promise.all(n.map(U));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){var t=new Image;return t.src=URL.createObjectURL(e),new Promise((function(e,n){t.addEventListener("load",(function(){return e(t)}))}))}function q(e){var t=document.createElement("canvas");t.width=2*e.width,t.height=2*e.height;var n=t.getContext("2d"),r=n.fillStyle;return n.fillStyle="white",n.fillRect(0,0,t.width,t.height),n.fillStyle=r,n.drawImage(e,0,0,t.width,t.height),t}function J(e,t){return new Promise((function(n,r){e.toBlob((function(e){e?n(e):r()}),t)}))}!function(e){e[e.Hourglass=0]="Hourglass",e[e.Relatives=1]="Relatives",e[e.Fancy=2]="Fancy"}(I||(I={}));var Z=function(e){Object(_.a)(r,e);var t=Object(y.a)(r);function r(){var e;Object(k.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).chart=void 0,e.animating=!1,e.rerenderRequired=!1,e.zoomBehavior=void 0,e}return Object(x.a)(r,[{key:"getChartType",value:function(){switch(this.props.chartType){case I.Hourglass:return P.HourglassChart;case I.Relatives:return P.RelativesChart;case I.Fancy:return P.FancyChart;default:return P.HourglassChart}}},{key:"getRendererType",value:function(){switch(this.props.chartType){case I.Fancy:return P.CircleRenderer;default:return P.DetailedRenderer}}},{key:"zoom",value:function(e){var t=Object(S.a)("#svgContainer");this.zoomBehavior.scaleBy(t,e)}},{key:"renderChart",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initialRender:!1};if(t.initialRender||!this.animating){if(t.initialRender||!this.props.freezeAnimation){t.initialRender?(Object(S.a)("#chart").node().innerHTML="",this.chart=Object(P.createChart)({json:this.props.data,chartType:this.getChartType(),renderer:this.getRendererType(),svgSelector:"#chart",indiCallback:function(t){return e.props.onSelection(t)},animate:!0,updateSvgSize:!1,locale:this.context.intl.locale})):this.chart.setData(this.props.data);var n=this.chart.render({startIndi:this.props.selection.id,baseGeneration:this.props.selection.generation}),r=Object(S.a)("#chartSvg"),a=Object(S.a)("#svgContainer").node(),i=Object(A.b)(a).k,o=Object(N.a)([1,i,a.clientWidth/n.size[0],a.clientHeight/n.size[1]]),s=[Object(M.a)([.1,o]),2];this.zoomBehavior=Object(A.a)().scaleExtent(s).translateExtent([[0,0],n.size]).on("zoom",(function(e){return z(n.size,e)})),Object(S.a)(a).on("scroll",G).call(this.zoomBehavior);var c=function(e){return function(){var t=Object(R.a)(a.scrollTop,e);return function(e){a.scrollTop=t(e)}}},u=function(e){return function(){var t=Object(R.a)(a.scrollLeft,e);return function(e){a.scrollLeft=t(e)}}},l=a.clientWidth/2-n.origin[0]*i,d=a.clientHeight/2-n.origin[1]*i,p=Object(M.a)([0,(a.clientWidth-n.size[0]*i)/2]),h=Object(M.a)([0,(a.clientHeight-n.size[1]*i)/2]),f=r.transition().delay(200).duration(500),m=t.initialRender?r:f;m.attr("transform","translate(".concat(p,", ").concat(h,")")).attr("width",n.size[0]*i).attr("height",n.size[1]*i),t.initialRender?(a.scrollLeft=-l,a.scrollTop=-d):f.tween("scrollLeft",u(-l)).tween("scrollTop",c(-d)),this.animating=!0,n.animationPromise.then((function(){e.animating=!1,e.rerenderRequired&&(e.rerenderRequired=!1,e.renderChart({initialRender:!1}))}))}}else this.rerenderRequired=!0}},{key:"componentDidMount",value:function(){this.renderChart({initialRender:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props.chartType!==e.chartType;this.renderChart({initialRender:t})}},{key:"render",value:function(){var e=this;return Object(W.jsxs)("div",{id:"svgContainer",children:[Object(W.jsxs)(L.a,{minWidth:768,className:"zoom",children:[Object(W.jsx)("button",{className:"zoom-in",onClick:function(){return e.zoom(1.3)},children:"+"}),Object(W.jsx)("button",{className:"zoom-out",onClick:function(){return e.zoom(1/1.3)},children:"\u2212"})]}),Object(W.jsx)("svg",{id:"chartSvg",children:Object(W.jsx)("g",{id:"chart"})})]})}},{key:"getStrippedSvg",value:function(){var e=document.getElementById("chartSvg").cloneNode(!0);e.removeAttribute("transform");var t=Object(S.a)("#svgContainer").node(),n=Object(A.b)(t).k;return e.setAttribute("width",String(Number(e.getAttribute("width"))/n)),e.setAttribute("height",String(Number(e.getAttribute("height"))/n)),e.querySelector("#chart").removeAttribute("transform"),e}},{key:"getSvgContents",value:function(){return(new XMLSerializer).serializeToString(this.getStrippedSvg())}},{key:"getSvgContentsWithInlinedImages",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getStrippedSvg(),e.next=3,H(t);case 3:return e.abrupt("return",(new XMLSerializer).serializeToString(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"print",value:function(){var e=this,t=document.createElement("iframe");t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.onload=function(){t.contentDocument.open(),t.contentDocument.write(e.getSvgContents()),t.contentDocument.close(),setTimeout((function(){t.contentWindow.focus(),t.contentWindow.print(),t.parentNode.removeChild(t)}),500)},document.body.appendChild(t)}},{key:"downloadSvg",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSvgContentsWithInlinedImages();case 2:t=e.sent,n=new Blob([t],{type:"image/svg+xml"}),Object(C.saveAs)(n,"topola.svg");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"drawOnCanvas",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSvgContentsWithInlinedImages();case 2:return t=e.sent,n=new Blob([t],{type:"image/svg+xml"}),e.t0=q,e.next=7,K(n);case 7:return e.t1=e.sent,e.next=10,(0,e.t0)(e.t1);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadPng",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.drawOnCanvas();case 2:return t=e.sent,e.next=5,J(t,"image/png");case 5:n=e.sent,Object(C.saveAs)(n,"topola.png");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadPdf",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,r,a,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.bind(null,790));case 2:return t=e.sent,r=t.default,e.next=6,this.drawOnCanvas();case 6:a=e.sent,(i=new r({orientation:a.width>a.height?"l":"p",unit:"pt",format:[a.width,a.height]})).addImage(a,"PNG",0,0,a.width,a.height,"NONE"),i.save("topola.pdf");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(l.PureComponent);Z.contextTypes={intl:j.d};var Y=n(243),X=n.n(Y),Q=n(244),$=n.n(Q),ee=n(190),te=n(131),ne=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(k.a)(this,n),(a=t.call(this,r)).code=e,a.args=i,a}return n}(Object(te.a)(Error));function re(e){return e.substring(1,e.length-1)}function ae(e){var t=new Map;return e.indis.forEach((function(e){t.set(e.id,e)})),t}function ie(e){var t=new Map;return e.fams.forEach((function(e){t.set(e.id,e)})),t}function oe(e){var t=e.find((function(e){return"HEAD"===e.tag})),n={},r={},a={};return e.forEach((function(e){"INDI"===e.tag?n[re(e.pointer)]=e:"FAM"===e.tag?r[re(e.pointer)]=e:e.pointer&&(a[re(e.pointer)]=e)})),{head:t,indis:n,fams:r,other:a}}function se(e,t){return e<t?-1:e>t?1:0}function ce(e,t){var n=e&&(e.date||e.dateRange&&e.dateRange.from),r=t&&(t.date||t.dateRange&&t.dateRange.from);return n&&n.year&&r&&r.year?n.year!==r.year?n.year-r.year:n.month&&r.month&&(n.month!==r.month||n.day&&r.day&&n.day!==r.day)?n.month-r.month:0:0}function ue(e){var t=function(e){var t=ae(e);return function(e,n){var r=t.get(e),a=t.get(n);return ce(r&&r.birth,a&&a.birth)||se(e,n)}}(e),n=e.fams.map((function(e){return function(e,t){if(!e.children)return e;var n=e.children.sort(t);return Object.assign({},e,{children:n})}(e,t)}));return Object.assign({},e,{fams:n})}function le(e){var t=function(e){var t=ie(e);return function(e,n){var r=t.get(e),a=t.get(n);return ce(r&&r.marriage,a&&a.marriage)||se(e,n)}}(e),n=e.indis.map((function(e){return function(e,t){if(!e.fams)return e;var n=e.fams.sort(t);return Object.assign({},e,{fams:n})}(e,t)}));return Object.assign({},e,{indis:n})}function de(e){return le(ue(e))}var pe=[".jpg",".png",".gif"];function he(e,t){if(!e.images||0===e.images.length)return e;var n=[];return e.images.forEach((function(e){var r=e.url.match(/[^/\\]*$/)[0];t.has(r)?n.push({url:t.get(r),title:e.title}):e.url.startsWith("http")&&function(e){var t=e.toLowerCase();return pe.some((function(e){return t.endsWith(e)}))}(e.url)&&n.push(e)})),Object.assign({},e,{images:n})}function fe(e,t){var n=e.indis.map((function(e){return he(e,t)}));return Object.assign({},e,{indis:n})}function me(e){var t=e&&e.tree&&e.tree.find((function(e){return"SOUR"===e.tag})),n=t&&t.tree&&t.tree.find((function(e){return"NAME"===e.tag}));return n&&n.data||null}var ge=new Map([["abt","about"],["cal","calculated"],["est","estimated"]]);function je(e,t){var n=void 0!==e.day,r=void 0!==e.month,a=void 0!==e.year;if(!n&&!r&&!a)return e.text||"";var i=new Date(a?e.year:0,r?e.month-1:0,n?e.day:1),o=e.qualifier&&e.qualifier.toLowerCase(),s={day:n?"numeric":void 0,month:r?"long":void 0,year:a?"numeric":void 0};return[o&&t.formatMessage({id:"date.".concat(o),defaultMessage:ge.get(o)||o}),new Intl.DateTimeFormat(t.locale,s).format(i)].join(" ")}function be(e,t){return e?e.date?je(e.date,t):e.dateRange?function(e,t){var n=e.from,r=e.to,a=n&&je(n,t),i=r&&je(r,t);return a&&i?t.formatMessage({id:"date.between",defaultMessage:"between {from} and {to}"},{from:a,to:i}):a?t.formatMessage({id:"date.after",defaultMessage:"after {from}"},{from:a}):i?t.formatMessage({id:"date.before",defaultMessage:"before {to}"},{to:i}):""}(e.dateRange,t):"":""}var Oe=["BIRT","BAPM","CHR","DEAT","BURI","EVEN","CENS"],ve=["NAME","SEX","FAMC","FAMS","NOTE","SOUR"],we=new Map([["ADOP","Adoption"],["BAPM","Baptism"],["BIRT","Birth"],["BURI","Burial"],["CENS","Census"],["CHR","Christening"],["CREM","Cremation"],["DEAT","Death"],["EDUC","Education"],["EMAIL","E-mail"],["EMIG","Emigration"],["EVEN","Event"],["FACT","Fact"],["IMMI","Immigration"],["MILT","Military services"],["NATU","Naturalization"],["OCCU","Occupation"],["TITL","Title"],["WWW","WWW"]]);function ke(e){var t=e.replace(/_/g,"");return Object(W.jsx)(j.a,{id:"gedcom.".concat(t),defaultMessage:we.get(t)||t})}function xe(e){return Object(W.jsx)(W.Fragment,{children:e.map((function(e,t){return Object(W.jsxs)("div",{children:[Object(W.jsx)($.a,{properties:{target:"_blank"},children:e}),Object(W.jsx)("br",{})]},t)}))})}function _e(e){var t=[e.data];return e.tree.forEach((function(e){if("CONC"===e.tag&&e.data){var n=t.length-1;t[n]+=e.data}else"CONT"===e.tag&&e.data&&t.push(e.data)})),t}function ye(e,t){var n=[];e.data&&e.data.length>1&&n.push(Object(W.jsx)("i",{children:e.data}));var a=e.tree.find((function(e){return"DATE"===e.tag}));a&&a.data&&n.push(function(e,t){return be(Object(P.getDate)(e),t)}(a.data,t));var i=e.tree.find((function(e){return"PLAC"===e.tag}));return i&&i.data&&n.push.apply(n,Object(r.a)(_e(i))),e.tree.filter((function(e){return"NOTE"===e.tag})).forEach((function(e){return _e(e).forEach((function(e){return n.push(Object(W.jsx)("i",{children:e}))}))})),n.length?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:"ui sub header",children:ke(e.tag)}),Object(W.jsx)("span",{children:xe(n)})]}):null}function De(e){return xe(_e(e).map((function(e,t){return Object(W.jsx)("i",{children:e},t)})))}function Te(e){return Object(W.jsx)("h2",{className:"ui header",children:e.data.split("/").filter((function(e){return!!e})).map((function(e,t){return Object(W.jsxs)("div",{children:[e,Object(W.jsx)("br",{})]},t)}))})}function Ee(e,t,n){return X()(t,(function(t){return e.filter((function(e){return e.tag===t})).map((function(e){return n(e)}))})).filter((function(e){return null!==e})).map((function(e,t){return Object(W.jsx)("div",{className:"ui segment",children:e},t)}))}function Ie(e){return e.tree.length>0||e.data&&!e.data.startsWith("@")}function Se(e){return e.filter((function(e){return!ve.includes(e.tag)&&!Oe.includes(e.tag)})).filter(Ie).map((function(e){return function(e){var t=[];return e.data&&t.push.apply(t,Object(r.a)(_e(e))),e.tree.filter((function(e){return"NOTE"===e.tag})).forEach((function(e){return _e(e).forEach((function(e){return t.push(Object(W.jsx)("i",{children:e}))}))})),t.length?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:"ui sub header",children:ke(e.tag)}),Object(W.jsx)("span",{children:xe(t)})]}):null}(e)})).filter((function(e){return null!==e})).map((function(e,t){return Object(W.jsx)("div",{className:"ui segment",children:e},t)}))}var Re=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t=this.props.gedcom.indis[this.props.indi].tree,n=t.map((function(t){return function(e,t){if(e.data){var n=t.other[re(e.data)];if(n)return n}return e}(t,e.props.gedcom)})).filter(Ie);return Object(W.jsxs)("div",{className:"ui segments",id:"details",children:[Ee(t,["NAME"],Te),Ee(t,Oe,(function(t){return ye(t,e.context.intl)})),Se(n),Ee(n,["NOTE"],De)]})}}]),n}(l.Component);function Me(e,t){return{id:t&&e.indis.some((function(e){return e.id===t.id}))?t.id:e.indis[0].id,generation:(null===t||void 0===t?void 0:t.generation)||0}}function Ne(e,t,n){var r=function(e,t){var n=Object(ee.parse)(e),r=Object(P.gedcomEntriesToJson)(n);if(!r||!r.indis||!r.indis.length||!r.fams||!r.fams.length)throw new ne("GEDCOM_READ_FAILED","Failed to read GEDCOM file");return{chartData:fe(de(r),t),gedcom:oe(n)}}(e,n||new Map),a=JSON.stringify(r);try{sessionStorage.setItem(t,a)}catch(i){console.warn("Failed to store data in session storage: "+i)}return r}function Le(e,t){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(w.a)(v.a.mark((function e(t,n){var r,a,i,o,s,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=sessionStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(r));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Failed to load data from session storage: "+e.t0);case 9:return(a=t.match(/https:\/\/drive\.google\.com\/file\/d\/(.*)\/.*/))&&(t="https://drive.google.com/uc?id=".concat(a[1],"&export=download")),(i=t.match(/https:\/\/drive\.google\.com\/open\?id=([^&]*)&?.*/))&&(t="https://drive.google.com/uc?id=".concat(i[1],"&export=download")),o=n?"https://topola-cors.herokuapp.com/"+t:t,e.next=16,window.fetch(o);case 16:if(200===(s=e.sent).status){e.next=19;break}throw new Error(s.statusText);case 19:return e.next=21,s.text();case 21:return c=e.sent,e.abrupt("return",Ne(c,t));case 23:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Ae(e,t,n){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(w.a)(v.a.mark((function e(t,n,r){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=sessionStorage.getItem(t))){e.next=4;break}return e.abrupt("return",JSON.parse(a));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn("Failed to load data from session storage: "+e.t0);case 9:if(n){e.next=11;break}throw new ne("ERROR_LOADING_UPLOADED_FILE","Error loading data. Please upload your file again.");case 11:return e.abrupt("return",Ne(n,t,r));case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}Re.contextTypes={intl:j.d};var We,ze=function(){function e(){Object(k.a)(this,e)}return Object(x.a)(e,[{key:"isNewData",value:function(e,t,n){return e.spec.hash!==t.spec.hash}},{key:"loadData",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae(t.spec.hash,t.spec.gedcom,t.spec.images);case 3:return n=e.sent,E("upload_file_loaded",{event_label:me(n.gedcom.head),event_value:t.spec.images&&t.spec.images.size||0}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),E("upload_file_error"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ge=function(){function e(){Object(k.a)(this,e)}return Object(x.a)(e,[{key:"isNewData",value:function(e,t,n){return e.spec.url!==t.spec.url}},{key:"loadData",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le(t.spec.url,t.spec.handleCors);case 3:return n=e.sent,E("upload_file_loaded",{event_label:me(n.gedcom.head)}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(0),E("url_file_error"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();!function(e){e.GEDCOM="gedcom",e.READY="ready",e.PARENT_READY="parent_ready"}(We||(We={}));var Fe=function(){function e(){Object(k.a)(this,e)}return Object(x.a)(e,[{key:"isNewData",value:function(e,t,n){return!1}},{key:"onMessage",value:function(){var e=Object(w.a)(v.a.mark((function e(t,n,r){var a,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.message!==We.PARENT_READY){e.next=4;break}window.parent.postMessage({message:We.READY},"*"),e.next=21;break;case 4:if(t.message!==We.GEDCOM){e.next=21;break}if(a=t.gedcom){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,e.next=11,Ae("",a);case 11:i=e.sent,E("embedded_file_loaded",{event_label:me(i.gedcom.head)}),n(i),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),E("embedded_file_error"),r(e.t0);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.parent.postMessage({message:We.READY},"*"),window.addEventListener("message",(function(r){return n.onMessage(r.data,e,t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ue=n.p+"static/media/topola.a3ffa9a5.jpg",Be=n(408),He=n(411),Ve=n(250),Ke=n(74);function qe(e){return Object(W.jsx)(Ke.b,{to:{pathname:"/view",search:T.stringify({url:e.url})},children:e.text})}function Je(){var e,t=Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("p",{children:Object(W.jsx)(j.a,{id:"intro.description",defaultMessage:"Topola Genealogy is a genealogy tree viewer that lets you browse the structure of the family."})}),Object(W.jsx)("p",{children:Object(W.jsx)(j.a,{id:"intro.instructions",defaultMessage:"Use the OPEN FILE or LOAD FROM URL buttons above to load a GEDCOM file. You can export a GEDCOM file from most of the existing genealogy programs and web sites."})}),Object(W.jsx)("p",{children:Object(W.jsx)(j.a,{id:"intro.examples",defaultMessage:"Here are some examples from the web that you can view:"})}),Object(W.jsxs)("ul",{children:[Object(W.jsxs)("li",{children:[Object(W.jsx)(qe,{url:"http://genpol.com/module-Downloads-prep_hand_out-lid-32.html",text:"Karol Wojty\u0142a"})," ","(",Object(W.jsx)(j.a,{id:"intro.from",defaultMessage:"from"})," ",Object(W.jsx)("a",{href:"http://genpol.com/module-Downloads-display-lid-32.html",children:"GENPOL"}),")"]}),Object(W.jsxs)("li",{children:[Object(W.jsx)(qe,{url:"https://webtreeprint.com/tp_downloader.php?path=famous_gedcoms/shakespeare.ged",text:"Shakespeare"})," ","(",Object(W.jsx)(j.a,{id:"intro.from",defaultMessage:"from"})," ",Object(W.jsx)("a",{href:"https://webtreeprint.com/tp_famous_gedcoms.php",children:"webtreeprint.com"}),")"]}),Object(W.jsxs)("li",{children:[Object(W.jsx)(qe,{url:"http://genealogyoflife.com/tng/gedcom/HarryPotter.ged",text:"Harry Potter"})," ","(",Object(W.jsx)(j.a,{id:"intro.from",defaultMessage:"from"})," ",Object(W.jsx)("a",{href:"http://famousfamilytrees.blogspot.com/",children:"Famous Family Trees"}),")"]})]}),Object(W.jsxs)("p",{children:[Object(W.jsx)("b",{children:Object(W.jsx)(j.a,{id:"intro.privacy",defaultMessage:"Privacy"})}),": ",Object(W.jsx)(j.a,{id:"intro.privacy_note",defaultMessage:'When using the "load from file" option, this site does not send your data anywhere and files loaded from disk do not leave your computer. When using "load from URL", data is passed through the {link} service to deal with an issue with cross-site file loading in the browser (CORS).',values:{link:Object(W.jsx)("a",{href:"https://topola-cors.herokuapp.com/",children:"cors-anywhere"})}})]}),Object(W.jsxs)("p",{className:"ui right aligned version",children:["version: ",(e="2021-03-31 00:07:25 +0200",e.slice(0,16))," (",Object(W.jsx)("a",{href:"https://github.com/PeWu/topola-viewer/commit/".concat("44e1954"),children:"44e1954"}),")"]})]});return Object(W.jsxs)("div",{id:"content",children:[Object(W.jsx)("div",{className:"backgroundImage"}),Object(W.jsxs)(Be.a,{className:"intro",children:[Object(W.jsx)(L.a,{as:Be.a.Content,minWidth:768,children:Object(W.jsx)(Be.a.Header,{children:Object(W.jsx)(j.a,{id:"intro.title",defaultMessage:"Topola Genealogy Viewer"})})}),Object(W.jsxs)(Be.a.Content,{children:[Object(W.jsx)(L.a,{as:He.a,minWidth:768,children:Object(W.jsxs)(He.a.Row,{children:[Object(W.jsx)(He.a.Column,{width:5,children:Object(W.jsx)(Ve.a,{src:Ue,alt:"Topola logo"})}),Object(W.jsx)(He.a.Column,{width:11,children:t})]})}),Object(W.jsxs)(L.a,{maxWidth:767,children:[Object(W.jsx)(Ve.a,{src:Ue,alt:"Topola logo",centered:!0,size:"tiny",className:"blockImage"}),t]})]})]})]})}var Ze,Ye=n(409),Xe=n(414),Qe=n(402),$e=n(24),et=n(405),tt=n(404);!function(e){e[e.Menu=0]="Menu",e[e.Dropdown=1]="Dropdown"}(Ze||(Ze={}));var nt=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=Object(b.a)({},this.props);return delete e.menuType,Object(W.jsx)(W.Fragment,{children:this.props.menuType===Ze.Menu?Object(W.jsx)(et.a.Item,Object(b.a)(Object(b.a)({},e),{},{children:this.props.children})):Object(W.jsx)(tt.a.Item,Object(b.a)(Object(b.a)({},e),{},{children:this.props.children}))})}}]),n}(l.Component),rt=n(195),at=n.n(rt),it=n(95);function ot(e){return new Promise((function(t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsText(e)}))}function st(e){var t=e.toLowerCase();return t.endsWith(".jpg")||t.endsWith(".png")}var ct=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"handleUpload",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n,r,a,i,o,s,c,u,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.target.files)&&n.length){e.next=3;break}return e.abrupt("return");case 3:return r=Array.from(n),t.target.value="",E("upload_files_selected",{event_value:n.length}),a=1===r.length?r[0]:r.find((function(e){return e.name.toLowerCase().endsWith(".ged")}))||r[0],i=r.filter((function(e){return e.name!==a.name&&st(e.name)})).map((function(e){return{name:e.name,url:URL.createObjectURL(e)}})),o=new Map(i.map((function(e){return[e.name,e.url]}))),e.next=11,ot(a);case 11:s=e.sent,c=i.map((function(e){return e.name})).sort().join("|"),u=at()(at()(s)+c),l=T.parse(this.props.location.search),(l.file===u?this.props.history.replace:this.props.history.push)({pathname:"/view",search:T.stringify({file:u}),state:{data:s,images:o}});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(it.a,{name:"folder open"}),Object(W.jsx)(j.a,{id:"menu.open_file",defaultMessage:"Open file"})]});return Object(W.jsxs)(W.Fragment,{children:[this.props.menuType===Ze.Menu?Object(W.jsx)("label",{htmlFor:"fileInput",children:Object(W.jsx)(et.a.Item,{as:"a",children:t})}):Object(W.jsx)(tt.a.Item,{as:"label",htmlFor:"fileInput",children:t}),Object(W.jsx)("input",{className:"hidden",type:"file",accept:".ged,image/*",id:"fileInput",multiple:!0,onChange:function(t){return e.handleUpload(t)}})]})}}]),n}(l.Component),ut=n(407),lt=n(412),dt=n(406),pt=n(401),ht=n(387),ft=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={dialogOpen:!1},e.inputRef=l.createRef(),e}return Object(x.a)(n,[{key:"openDialog",value:function(){var e=this;this.setState(Object.assign({},this.state,{dialogOpen:!0}),(function(){return e.inputRef.current.focus()}))}},{key:"handleClose",value:function(){this.setState(Object.assign({},this.state,{dialogOpen:!1}))}},{key:"handleLoad",value:function(){this.setState(Object.assign({},this.state,{dialogOpen:!1})),this.state.url&&(E("url_selected"),this.props.history.push({pathname:"/view",search:T.stringify({url:this.state.url})}))}},{key:"handleUrlChange",value:function(e){this.setState(Object.assign({},this.state,{url:e}))}},{key:"loadFromUrlModal",value:function(){var e=this;return Object(W.jsxs)(ut.a,{open:this.state.dialogOpen,onClose:function(){return e.handleClose()},centered:!1,children:[Object(W.jsxs)(lt.a,{children:[Object(W.jsx)(it.a,{name:"cloud download"}),Object(W.jsx)(j.a,{id:"load_from_url.title",defaultMessage:"Load from URL",children:function(e){return e}})]}),Object(W.jsx)(ut.a.Content,{children:Object(W.jsxs)(dt.a,{onSubmit:function(){return e.handleLoad()},children:[Object(W.jsx)(pt.a,{placeholder:"https://",fluid:!0,onChange:function(t,n){return e.handleUrlChange(n.value)},ref:this.inputRef}),Object(W.jsx)("p",{children:Object(W.jsx)(j.a,{id:"load_from_url.comment",defaultMessage:"Data from the URL will be loaded through {link} to avoid CORS issues.",values:{link:Object(W.jsx)("a",{href:"https://topola-cors.herokuapp.com/",children:"topola-cors.herokuapp.com"})}})})]})}),Object(W.jsxs)(ut.a.Actions,{children:[Object(W.jsx)(ht.a,{secondary:!0,onClick:function(){return e.handleClose()},children:Object(W.jsx)(j.a,{id:"load_from_url.cancel",defaultMessage:"Cancel"})}),Object(W.jsx)(ht.a,{primary:!0,onClick:function(){return e.handleLoad()},children:Object(W.jsx)(j.a,{id:"load_from_url.load",defaultMessage:"Load"})})]})]})}},{key:"render",value:function(){var e=this;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(nt,{onClick:function(){return e.openDialog()},menuType:this.props.menuType,children:[Object(W.jsx)(it.a,{name:"cloud download"}),Object(W.jsx)(j.a,{id:"menu.load_from_url",defaultMessage:"Load from URL"})]}),this.loadFromUrlModal()]})}}]),n}(l.Component),mt=n.p+"static/media/wikitree.7bffea31.png",gt=n(196),jt=n.n(gt),bt="~Private",Ot="wikidb_wtb_UserName";function vt(e){try{return sessionStorage.getItem(e)}catch(t){console.warn("Failed to load data from session storage: "+t)}return null}function wt(e,t){try{sessionStorage.setItem(e,t)}catch(n){console.warn("Failed to store data in session storage: "+n)}}function kt(e,t){return xt.apply(this,arguments)}function xt(){return(xt=Object(w.a)(v.a.mark((function e(t,n){var r,a,i,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in(r=new FormData).append("format","json"),t)r.append(a,t[a]);return i=n?"https://topola-cors.herokuapp.com/https://api.wikitree.com/api.php":"https://api.wikitree.com/api.php",e.next=6,window.fetch(i,{method:"POST",body:r,credentials:n?void 0:"include"});case 6:return o=e.sent,e.next=9,o.text();case 9:return s=e.sent,e.abrupt("return",JSON.parse(s));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t){return yt.apply(this,arguments)}function yt(){return(yt=Object(w.a)(v.a.mark((function e(t,n){var r,a,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="wikitree:ancestors:".concat(t),!(a=vt(r))){e.next=4;break}return e.abrupt("return",JSON.parse(a));case 4:return e.next=6,kt({action:"getAncestors",key:t,fields:"*"},n);case 6:return i=e.sent,o=i[0].ancestors,wt(r,JSON.stringify(o)),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(w.a)(v.a.mark((function e(t,n){var r,a,i,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],a=[],t.forEach((function(e){var t=vt("wikitree:relatives:".concat(e));t?r.push(JSON.parse(t)):a.push(e)})),0!==a.length){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,kt({action:"getRelatives",keys:a.join(","),getChildren:!0,getSpouses:!0},n);case 7:if(null!==(i=e.sent)[0].items){e.next=11;break}throw o=a[0],new ne("WIKITREE_PROFILE_NOT_FOUND","WikiTree profile ".concat(o," not found"),{id:o});case 11:return(s=i[0].items.map((function(e){return e.person}))).forEach((function(e){wt("wikitree:relatives:".concat(e.Name),JSON.stringify(e))})),e.abrupt("return",r.concat(s));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Et(e){return It.apply(this,arguments)}function It(){return(It=Object(w.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt({action:"clientLogin",authcode:t},!1);case 2:return n=e.sent,e.abrupt("return",n.clientLogin);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(){return jt.a.get(Ot)}function Rt(e,t,n){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(w.a)(v.a.mark((function e(t,n,a){var i,o,s,c,u,l,d,p,h,f,m,g,j,b,O,w,k,x,_,y,T,E,I,S,R,M;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i="apps.wikitree.com"!==window.location.hostname)||St()||!a){e.next=6;break}return e.next=4,Et(a);case 4:"Success"===(o=e.sent).result&&(sessionStorage.clear(),jt.a.set(Ot,o.username));case 6:return s=[],e.next=9,Dt([t],i);case 9:if((c=e.sent)[0].Name){e.next=13;break}throw new ne("WIKITREE_PROFILE_NOT_ACCESSIBLE","WikiTree profile ".concat(u=t," is not accessible. Try logging in."),{id:u});case 13:return l=Object.values(c[0].Spouses).map((function(e){return e.Name})),e.next=16,Promise.all([t].concat(l).map((function(e){return _t(e,i)})));case 16:return d=e.sent,p=d.flat().map((function(e){return e.Name})).filter((function(e){return!!e})),e.next=20,Dt(p,i);case 20:h=e.sent,f=new Map,m=new Map,d.forEach((function(e,t){var n=1e3*t;e.forEach((function(e){e.Id<0&&(e.Id-=n,e.Name="".concat(bt).concat(e.Id)),e.Father<0&&(e.Father-=n,f.set(e.Id,e.Father)),e.Mother<0&&(e.Mother-=n,m.set(e.Id,e.Mother))}))})),h.forEach((function(e){var t=f.get(e.Id);t&&(e.Father=t);var n=m.get(e.Id);n&&(e.Mother=n)})),s.push.apply(s,Object(r.a)(h)),g=d.flat().filter((function(e){return e.Id<0})),s.push.apply(s,Object(r.a)(g)),j=5,b=[t],O=0;case 31:if(!(b.length>0&&O<=j)){e.next=42;break}return e.next=34,Dt(b,i);case 34:w=e.sent,s.push.apply(s,Object(r.a)(w)),k=w.flatMap((function(e){return Object.values(e.Spouses)})),s.push.apply(s,Object(r.a)(k)),b=w.flatMap((function(e){return Object.values(e.Children).map((function(e){return e.Name}))})),O++,e.next=31;break;case 42:return x=new Map,_=new Map,y=new Map,T=new Map,s.forEach((function(e){if(T.set(e.Id,e.Name),e.Mother||e.Father){var t=Nt(e.Mother,e.Father);Wt(x,e.Mother).add(t),Wt(x,e.Father).add(t),Wt(_,t).add(e.Id),y.set(t,{wife:e.Mother||void 0,husband:e.Father||void 0})}})),E=[],I=new Set,s.forEach((function(e){if(!I.has(e.Id)){I.add(e.Id);var t=Lt(e,n);e.Spouses&&Object.values(e.Spouses).forEach((function(t){var n=Nt(e.Id,t.Id);Wt(x,e.Id).add(n),Wt(x,t.Id).add(n);var r="Male"===e.Gender?{wife:t.Id,husband:e.Id,spouse:t}:{wife:e.Id,husband:t.Id,spouse:t};y.set(n,r)})),t.fams=Array.from(Wt(x,e.Id)),E.push(t)}})),S=Array.from(y.entries()).map((function(e){var t=Object(D.a)(e,2),n=t[0],r=t[1],a={id:n},i=r.wife&&T.get(r.wife);i&&(a.wife=i);var o=r.husband&&T.get(r.husband);if(o&&(a.husb=o),a.children=Array.from(Wt(_,n)).map((function(e){return T.get(e)})),r.spouse&&(r.spouse.marriage_date&&"0000-00-00"!==r.spouse.marriage_date||r.spouse.marriage_location)){var s=Ct(r.spouse.marriage_date);a.marriage=Object.assign({},s,{place:r.spouse.marriage_location})}return a})),R=de({indis:E,fams:S}),M=Pt(E),e.abrupt("return",{chartData:R,gedcom:M});case 54:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nt(e,t){return t>e?"".concat(e,"_").concat(t):"".concat(t,"_").concat(e)}function Lt(e,t){var n={id:e.Name};if(e.Name.startsWith(bt)&&(n.hideId=!0,n.firstName=t.formatMessage({id:"wikitree.private",defaultMessage:"Private"})),e.FirstName&&"Unknown"!==e.FirstName?n.firstName=e.FirstName:e.RealName&&"Unknown"!==e.RealName&&(n.firstName=e.RealName),"Unknown"!==e.LastNameAtBirth&&(n.lastName=e.LastNameAtBirth),(e.Mother||e.Father)&&(n.famc=Nt(e.Mother,e.Father)),"Male"===e.Gender?n.sex="M":"Female"===e.Gender&&(n.sex="F"),e.BirthDate&&"0000-00-00"!==e.BirthDate||e.BirthLocation||"unknown"!==e.BirthDateDecade){var r=Ct(e.BirthDate,e.DataStatus&&e.DataStatus.BirthDate)||At(e.BirthDateDecade);n.birth=Object.assign({},r,{place:e.BirthLocation})}if(e.DeathDate&&"0000-00-00"!==e.DeathDate||e.DeathLocation||"unknown"!==e.DeathDateDecade){var a=Ct(e.DeathDate,e.DataStatus&&e.DataStatus.DeathDate)||At(e.DeathDateDecade);n.death=Object.assign({},a,{place:e.DeathLocation})}return e.PhotoData&&(n.images=[{url:"https://www.wikitree.com".concat(e.PhotoData.url)}]),n}function Ct(e,t){if(e){var n=e.match(/(\d\d\d\d)-(\d\d)-(\d\d)/);if(!n)return{date:{text:e}};var r={};return"0000"!==n[1]&&(r.year=~~n[1]),"00"!==n[2]&&(r.month=~~n[2]),"00"!==n[3]&&(r.day=~~n[3]),"after"===t?{dateRange:{from:r}}:"before"===t?{dateRange:{to:r}}:("guess"===t&&(r.qualifier="abt"),{date:r})}}function At(e){return"unknown"!==e?{date:{text:e}}:void 0}function Pt(e){var t={};return e.forEach((function(e){var n=e.id.replace(/ /g,"_");t[e.id]={level:0,pointer:"@".concat(e.id,"@"),tag:"INDI",data:"",tree:[{level:1,pointer:"",tag:"NAME",data:"".concat(e.firstName||""," /").concat(e.lastName||"","/"),tree:[]}]},e.id.startsWith("~")||t[e.id].tree.push({level:1,pointer:"",tag:"WWW",data:"https://www.wikitree.com/wiki/".concat(n),tree:[]})})),{head:{level:0,pointer:"",tag:"HEAD",data:"",tree:[]},indis:t,fams:{},other:{}}}function Wt(e,t){var n=e.get(t);if(n)return n;var r=new Set;return e.set(t,r),r}var zt,Gt=function(){function e(t){Object(k.a)(this,e),this.intl=t}return Object(x.a)(e,[{key:"isNewData",value:function(e,t,n){var r;return!!e.selection&&((null===(r=t.selection)||void 0===r?void 0:r.id)!==e.selection.id&&(!n||!n.chartData.indis.some((function(t){var n;return t.id===(null===(n=e.selection)||void 0===n?void 0:n.id)}))))}},{key:"loadData",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selection){e.next=2;break}throw new ne("WIKITREE_ID_NOT_PROVIDED","WikiTree id needs to be provided");case 2:return e.prev=2,e.next=5,Rt(t.selection.id,this.intl,t.spec.authcode);case 5:return n=e.sent,E("wikitree_loaded"),e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(2),E("wikitree_error"),e.t0;case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_LOGGED_IN=1]="NOT_LOGGED_IN",e[e.LOGGED_IN=2]="LOGGED_IN"}(zt||(zt={}));var Ft=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={dialogOpen:!1},e.inputRef=l.createRef(),e}return Object(x.a)(n,[{key:"openDialog",value:function(){var e=this;this.setState(Object.assign({},this.state,{dialogOpen:!0}),(function(){return e.inputRef.current.focus()}))}},{key:"handleClose",value:function(){this.setState(Object.assign({},this.state,{dialogOpen:!1}))}},{key:"handleSelectId",value:function(){if(this.setState(Object.assign({},this.state,{dialogOpen:!1})),this.state.wikiTreeId){E("wikitree_id_selected");var e=T.parse(this.props.location.search),t=void 0===e.standalone||e.standalone;this.props.history.push({pathname:"/view",search:T.stringify({indi:this.state.wikiTreeId,source:"wikitree",standalone:t})})}}},{key:"handleIdChange",value:function(e){this.setState(Object.assign({},this.state,{wikiTreeId:e}))}},{key:"enterId",value:function(e,t){e.preventDefault(),this.inputRef.current.inputRef.value=t,this.handleIdChange(t),this.inputRef.current.focus()}},{key:"wikiTreeIdModal",value:function(){var e=this;return Object(W.jsxs)(ut.a,{open:this.state.dialogOpen,onClose:function(){return e.handleClose()},centered:!1,children:[Object(W.jsxs)(lt.a,{children:[Object(W.jsx)("img",{src:mt,alt:"WikiTree logo",style:{width:"32px",height:"32px"}}),Object(W.jsx)(j.a,{id:"select_wikitree_id.title",defaultMessage:"Select WikiTree ID",children:function(e){return e}})]}),Object(W.jsx)(ut.a.Content,{children:Object(W.jsxs)(dt.a,{onSubmit:function(){return e.handleSelectId()},children:[Object(W.jsx)("p",{children:Object(W.jsx)(j.a,{id:"select_wikitree_id.comment",defaultMessage:"Enter a {wikiTreeLink} profile ID. Examples: {example1}, {example2}.",values:{wikiTreeLink:Object(W.jsx)("a",{href:"https://wikitree.com/",target:"_blank",rel:"noopener noreferrer",children:"WikiTree"}),example1:Object(W.jsx)("span",{onClick:function(t){return e.enterId(t,"Wojtyla-13")},className:"link-span",children:"Wojtyla-13"}),example2:Object(W.jsx)("span",{onClick:function(t){return e.enterId(t,"Sk\u0142odowska-2")},className:"link-span",children:"Sk\u0142odowska-2"})}})}),Object(W.jsx)(pt.a,{fluid:!0,onChange:function(t,n){return e.handleIdChange(n.value)},ref:this.inputRef})]})}),Object(W.jsxs)(ut.a.Actions,{children:[Object(W.jsx)(ht.a,{secondary:!0,onClick:function(){return e.handleClose()},children:Object(W.jsx)(j.a,{id:"select_wikitree_id.cancel",defaultMessage:"Cancel"})}),Object(W.jsx)(ht.a,{primary:!0,onClick:function(){return e.handleSelectId()},children:Object(W.jsx)(j.a,{id:"select_wikitree_id.load",defaultMessage:"Load"})})]})]})}},{key:"render",value:function(){var e=this;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(nt,{menuType:this.props.menuType,onClick:function(){return e.openDialog()},children:[Object(W.jsx)("img",{src:mt,alt:"WikiTree logo",className:"menu-icon"}),Object(W.jsx)(j.a,{id:"menu.select_wikitree_id",defaultMessage:"Select WikiTree ID"})]}),this.wikiTreeIdModal()]})}}]),n}(l.Component),Ut=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={wikiTreeLoginState:zt.UNKNOWN},e.wikiTreeLoginFormRef=l.createRef(),e.wikiTreeReturnUrlRef=l.createRef(),e}return Object(x.a)(n,[{key:"wikiTreeLogin",value:function(){var e="".concat("https://apps.wikitree.com/apps/wiech13/topola-viewer").concat(window.location.hash,"&");this.wikiTreeReturnUrlRef.current.value=e,this.wikiTreeLoginFormRef.current.submit()}},{key:"checkWikiTreeLoginState",value:function(){var e=St(),t=e?zt.LOGGED_IN:zt.NOT_LOGGED_IN;this.state.wikiTreeLoginState!==t&&this.setState(Object.assign({},this.state,{wikiTreeLoginState:t,wikiTreeLoginUsername:e}))}},{key:"componentDidMount",value:function(){this.checkWikiTreeLoginState()}},{key:"componentDidUpdate",value:function(){this.checkWikiTreeLoginState()}},{key:"render",value:function(){var e=this;switch(this.state.wikiTreeLoginState){case zt.NOT_LOGGED_IN:return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(nt,{menuType:this.props.menuType,onClick:function(){return e.wikiTreeLogin()},children:[Object(W.jsx)("img",{src:mt,alt:"WikiTree logo",className:"menu-icon"}),Object(W.jsx)(j.a,{id:"menu.wikitree_login",defaultMessage:"Log in to WikiTree"})]}),Object(W.jsxs)("form",{action:"https://api.wikitree.com/api.php",method:"POST",style:{display:"hidden"},ref:this.wikiTreeLoginFormRef,children:[Object(W.jsx)("input",{type:"hidden",name:"action",value:"clientLogin"}),Object(W.jsx)("input",{type:"hidden",name:"returnURL",ref:this.wikiTreeReturnUrlRef})]})]});case zt.LOGGED_IN:var t=this.state.wikiTreeLoginUsername?this.context.intl.formatMessage({id:"menu.wikitree_popup_username",defaultMessage:"Logged in to WikiTree as {username}"},{username:this.state.wikiTreeLoginUsername}):this.context.intl.formatMessage({id:"menu.wikitree_popup",defaultMessage:"Logged in to WikiTree"});return Object(W.jsxs)(nt,{menuType:this.props.menuType,title:t,children:[Object(W.jsx)("img",{src:mt,alt:"WikiTree logo",className:"menu-icon"}),Object(W.jsx)(j.a,{id:"menu.wikitree_logged_in",defaultMessage:"Logged in"})]})}return null}}]),n}(l.Component);Ut.contextTypes={intl:j.d};var Bt=n(247),Ht=n.n(Bt),Vt=n(64),Kt=n.n(Vt),qt=n(248),Jt=n.n(qt);n(376)(Kt.a),n(377)(Kt.a),n(378)(Kt.a),n(379)(Kt.a),n(380)(Kt.a),n(381)(Kt.a);function Zt(e){return e.toLocaleLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0142/g,"l")}function Yt(e,t){return e.score!==t.score?t.score-e.score:Jt()(e.ref,t.ref)}var Xt=function(){function e(t){Object(k.a)(this,e),this.index=void 0,this.indiMap=void 0,this.famMap=void 0,this.indiMap=ae(t),this.famMap=ie(t)}return Object(x.a)(e,[{key:"initialize",value:function(){var e=this;this.index=Kt()((function(){var t=this;this.use(Kt.a.multiLanguage("de","en","fr","it","ru")),this.ref("id"),this.field("id"),this.field("name",{boost:10}),this.field("normalizedName",{boost:8}),this.field("spouseLastName",{boost:2}),this.field("normalizedSpouseLastName",{boost:2}),e.indiMap.forEach((function(n){var r=[n.firstName,n.lastName].join(" "),a=function(e,t,n){return(e.fams||[]).map((function(e){return n.get(e)})).map((function(e){return e&&e.husb})).map((function(e){return e&&t.get(e)})).map((function(e){return e&&e.lastName})).join(" ")}(n,e.indiMap,e.famMap);t.add({id:n.id,name:r,normalizedName:Zt(r),spouseLastName:a,normalizedSpouseLastName:Zt(a)})}))}))}},{key:"search",value:function(e){var t=this,n=e.split(" ").filter((function(e){return!!e})).map((function(e){return"+".concat(e,"*")})).join(" ");return this.index.search(n).sort(Yt).slice(0,8).map((function(e){return{id:e.ref,indi:t.indiMap.get(e.ref)}}))}}]),e}();var Qt=n(403);function $t(e){var t=[e.indi.firstName,e.indi.lastName].join(" ").trim();return e.id.length>8?t:Object(W.jsxs)(W.Fragment,{children:[t," ",Object(W.jsxs)("i",{children:["(",e.id,")"]})]})}var en,tn=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={searchResults:[]},e.searchRef=void 0,e.searchIndex=void 0,e}return Object(x.a)(n,[{key:"getDescriptionLine",value:function(e){var t=be(e.birth,this.context.intl),n=be(e.death,this.context.intl);return n?"".concat(t," \u2013 ").concat(n):t}},{key:"displaySearchResult",value:function(e){return{id:e.id,key:e.id,title:$t(e),description:this.getDescriptionLine(e.indi)}}},{key:"handleSearch",value:function(e){var t=this;if(e){var n=this.searchIndex.search(e).map((function(e){return t.displaySearchResult(e)}));this.setState(Object.assign({},this.state,{searchResults:n}))}}},{key:"handleResultSelect",value:function(e){E("search_result_selected"),this.props.onSelection({id:e,generation:0}),this.searchRef.setValue("")}},{key:"initializeSearchIndex",value:function(){this.searchIndex=function(e){var t=new Xt(e);return t.initialize(),t}(this.props.data)}},{key:"componentDidMount",value:function(){this.initializeSearchIndex()}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.initializeSearchIndex()}},{key:"render",value:function(){var e=this;return Object(W.jsx)(Qt.a,{onSearchChange:Ht()((function(t,n){return e.handleSearch(n.value)}),200),onResultSelect:function(t,n){return e.handleResultSelect(n.result.id)},results:this.state.searchResults,noResultsMessage:this.context.intl.formatMessage({id:"menu.search.no_results",defaultMessage:"No results found"}),placeholder:this.context.intl.formatMessage({id:"menu.search.placeholder",defaultMessage:"Search for people"}),selectFirstResult:!0,ref:function(t){return e.searchRef=t},id:"search"})}}]),n}(l.Component);tn.contextTypes={intl:j.d},function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(en||(en={}));var nn,rn,an=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"changeView",value:function(e){var t=this.props.location,n=T.parse(t.search);n.view!==e&&(n.view=e,t.search=T.stringify(n),this.props.history.push(t))}},{key:"chartMenus",value:function(e){var t=this;if(!this.props.showingChart)return null;var n=Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(tt.a.Item,{onClick:function(){return t.changeView("hourglass")},children:[Object(W.jsx)(it.a,{name:"hourglass"}),Object(W.jsx)(j.a,{id:"menu.hourglass",defaultMessage:"Hourglass chart"})]}),this.props.allowAllRelativesChart?Object(W.jsxs)(tt.a.Item,{onClick:function(){return t.changeView("relatives")},children:[Object(W.jsx)(it.a,{name:"users"}),Object(W.jsx)(j.a,{id:"menu.relatives",defaultMessage:"All relatives"})]}):null,Object(W.jsxs)(tt.a.Item,{onClick:function(){return t.changeView("fancy")},children:[Object(W.jsx)(it.a,{name:"users"}),Object(W.jsx)(j.a,{id:"menu.fancy",defaultMessage:"Fancy tree (experimental)"})]})]});switch(e){case en.LARGE:return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(et.a.Item,{onClick:function(){return t.props.eventHandlers.onPrint()},children:[Object(W.jsx)(it.a,{name:"print"}),Object(W.jsx)(j.a,{id:"menu.print",defaultMessage:"Print"})]}),Object(W.jsx)(tt.a,{trigger:Object(W.jsxs)("div",{children:[Object(W.jsx)(it.a,{name:"download"}),Object(W.jsx)(j.a,{id:"menu.download",defaultMessage:"Download"})]}),className:"item",children:Object(W.jsxs)(tt.a.Menu,{children:[Object(W.jsx)(tt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadPdf()},children:Object(W.jsx)(j.a,{id:"menu.pdf_file",defaultMessage:"PDF file"})}),Object(W.jsx)(tt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadPng()},children:Object(W.jsx)(j.a,{id:"menu.png_file",defaultMessage:"PNG file"})}),Object(W.jsx)(tt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadSvg()},children:Object(W.jsx)(j.a,{id:"menu.svg_file",defaultMessage:"SVG file"})})]})}),Object(W.jsx)(tt.a,{trigger:Object(W.jsxs)("div",{children:[Object(W.jsx)(it.a,{name:"eye"}),Object(W.jsx)(j.a,{id:"menu.view",defaultMessage:"View"})]}),className:"item",children:Object(W.jsx)(tt.a.Menu,{children:n})}),Object(W.jsx)(tn,Object(b.a)({data:this.props.data,onSelection:this.props.eventHandlers.onSelection},this.props))]});case en.SMALL:return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(tt.a.Item,{onClick:function(){return t.props.eventHandlers.onPrint()},children:[Object(W.jsx)(it.a,{name:"print"}),Object(W.jsx)(j.a,{id:"menu.print",defaultMessage:"Print"})]}),Object(W.jsx)(tt.a.Divider,{}),Object(W.jsxs)(tt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadPdf()},children:[Object(W.jsx)(it.a,{name:"download"}),Object(W.jsx)(j.a,{id:"menu.download_pdf",defaultMessage:"Downlod PDF"})]}),Object(W.jsxs)(tt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadPng()},children:[Object(W.jsx)(it.a,{name:"download"}),Object(W.jsx)(j.a,{id:"menu.download_png",defaultMessage:"Download PNG"})]}),Object(W.jsxs)(tt.a.Item,{onClick:function(){return t.props.eventHandlers.onDownloadSvg()},children:[Object(W.jsx)(it.a,{name:"download"}),Object(W.jsx)(j.a,{id:"menu.download_svg",defaultMessage:"Download SVG"})]}),Object(W.jsx)(tt.a.Divider,{}),n,Object(W.jsx)(tt.a.Divider,{})]})}}},{key:"title",value:function(){return Object(W.jsx)(et.a.Item,{children:Object(W.jsx)("b",{children:"Topola Genealogy"})})}},{key:"fileMenus",value:function(e){if(!this.props.standalone&&this.props.showWikiTreeMenus)switch(e){case en.LARGE:return Object(W.jsx)(Ft,Object(b.a)({menuType:Ze.Menu},this.props));case en.SMALL:return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ft,Object(b.a)({menuType:Ze.Dropdown},this.props)),Object(W.jsx)(tt.a.Divider,{})]})}if(!this.props.standalone)return null;switch(e){case en.LARGE:return this.props.showingChart?Object(W.jsx)(tt.a,{trigger:Object(W.jsxs)("div",{children:[Object(W.jsx)(it.a,{name:"folder open"}),Object(W.jsx)(j.a,{id:"menu.open",defaultMessage:"Open"})]}),className:"item",children:Object(W.jsxs)(tt.a.Menu,{children:[Object(W.jsx)(ct,Object(b.a)({menuType:Ze.Dropdown},this.props)),Object(W.jsx)(ft,Object(b.a)({menuType:Ze.Dropdown},this.props)),Object(W.jsx)(Ft,Object(b.a)({menuType:Ze.Dropdown},this.props))]})}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ct,Object(b.a)({menuType:Ze.Menu},this.props)),Object(W.jsx)(ft,Object(b.a)({menuType:Ze.Menu},this.props)),Object(W.jsx)(Ft,Object(b.a)({menuType:Ze.Menu},this.props))]});case en.SMALL:return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ct,Object(b.a)({menuType:Ze.Dropdown},this.props)),Object(W.jsx)(ft,Object(b.a)({menuType:Ze.Dropdown},this.props)),Object(W.jsx)(Ft,Object(b.a)({menuType:Ze.Dropdown},this.props)),Object(W.jsx)(tt.a.Divider,{})]})}}},{key:"wikiTreeLoginMenu",value:function(e){return this.props.showWikiTreeMenus?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ut,Object(b.a)({menuType:e===en.SMALL?Ze.Dropdown:Ze.Menu},this.props)),e===en.SMALL?Object(W.jsx)(tt.a.Divider,{}):null]}):null}},{key:"mobileMenus",value:function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(tt.a,{trigger:Object(W.jsx)("div",{children:Object(W.jsx)(it.a,{name:"sidebar"})}),className:"item",icon:null,children:Object(W.jsxs)(tt.a.Menu,{children:[this.fileMenus(en.SMALL),this.chartMenus(en.SMALL),this.wikiTreeLoginMenu(en.SMALL),Object(W.jsx)(tt.a.Item,{href:"https://github.com/PeWu/topola-viewer",target:"_blank",rel:"noopener noreferrer",children:Object(W.jsx)(j.a,{id:"menu.github",defaultMessage:"GitHub project"})})]})}),this.props.standalone?Object(W.jsx)(Ke.b,{to:"/",children:this.title()}):this.title()]})}},{key:"desktopMenus",value:function(){return Object(W.jsxs)(W.Fragment,{children:[this.props.standalone?Object(W.jsx)(Ke.b,{to:"/",children:this.title()}):null,this.fileMenus(en.LARGE),this.chartMenus(en.LARGE),Object(W.jsxs)(et.a.Menu,{position:"right",children:[this.wikiTreeLoginMenu(en.LARGE),Object(W.jsx)(et.a.Item,{href:"https://github.com/PeWu/topola-viewer",target:"_blank",rel:"noopener noreferrer",children:Object(W.jsx)(j.a,{id:"menu.github",defaultMessage:"GitHub project"})})]})]})}},{key:"render",value:function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(L.a,{as:et.a,attached:"top",inverted:!0,color:"blue",size:"large",minWidth:768,children:this.desktopMenus()}),Object(W.jsx)(L.a,{as:et.a,attached:"top",inverted:!0,color:"blue",size:"large",maxWidth:767,children:this.mobileMenus()})]})}}]),n}(l.Component);function on(e){return Object(W.jsxs)(Ye.a,{negative:!0,className:"error",children:[Object(W.jsx)(Ye.a.Header,{children:Object(W.jsx)(j.a,{id:"error.failed_to_load_file",defaultMessage:"Failed to load file"})}),Object(W.jsx)("p",{children:e.message})]})}function sn(e){return Object(W.jsx)(Xe.a,{open:e.open,onClose:e.onDismiss,children:Object(W.jsxs)(Ye.a,{negative:!0,className:"errorPopup",onDismiss:e.onDismiss,children:[Object(W.jsx)(Ye.a.Header,{children:Object(W.jsx)(j.a,{id:"error.error",defaultMessage:"Error"})}),Object(W.jsx)("p",{children:e.message})]})})}function cn(e){var t=T.parse(e.search),n=function(e){var n=t[e];return"string"===typeof n?n:void 0},r=n("view"),a=new Map([["relatives",I.Relatives],["fancy",I.Fancy]]),i=n("file"),o=n("url"),s="true"===n("embedded"),c=void 0;"wikitree"===n("source")?c={source:nn.WIKITREE,authcode:n("?authcode")}:i?c={source:nn.UPLOADED,hash:i,gedcom:e.state&&e.state.data,images:e.state&&e.state.images}:o?c={source:nn.GEDCOM_URL,url:o,handleCors:"false"!==n("handleCors")}:s&&(c={source:nn.EMBEDDED});var u=n("indi"),l=Number(n("gen"));return{sourceSpec:c,selection:u?{id:u,generation:isNaN(l)?0:l}:void 0,chartType:a.get(r)||I.Hourglass,showSidePanel:"false"!==n("sidePanel"),standalone:"false"!==n("standalone")&&!s,freezeAnimation:"true"===n("freeze")}}!function(e){e[e.UPLOADED=0]="UPLOADED",e[e.GEDCOM_URL=1]="GEDCOM_URL",e[e.WIKITREE=2]="WIKITREE",e[e.EMBEDDED=3]="EMBEDDED"}(nn||(nn={})),function(e){e[e.INITIAL=0]="INITIAL",e[e.LOADING=1]="LOADING",e[e.ERROR=2]="ERROR",e[e.SHOWING_CHART=3]="SHOWING_CHART",e[e.LOADING_MORE=4]="LOADING_MORE"}(rn||(rn={}));var un=function(e){Object(_.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={state:rn.INITIAL,standalone:!0,chartType:I.Hourglass,showErrorPopup:!1},e.chartRef=null,e.uploadedDataSource=new ze,e.gedcomUrlDataSource=new Ge,e.wikiTreeDataSource=new Gt(e.context.intl),e.embeddedDataSource=new Fe,e.onSelection=function(t){if(!t.id.startsWith(bt)){E("selection_changed");var n=e.props.location,r=T.parse(n.search);r.indi=t.id,r.gen=String(t.generation),n.search=T.stringify(r),e.props.history.push(n)}},e.onPrint=function(){E("print"),e.chartRef&&e.chartRef.print()},e.onDownloadPdf=Object(w.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E("download_pdf"),t.prev=1,t.t0=e.chartRef,!t.t0){t.next=6;break}return t.next=6,e.chartRef.downloadPdf();case 6:t.next=11;break;case 8:t.prev=8,t.t1=t.catch(1),e.showErrorPopup(e.context.intl.formatMessage({id:"error.failed_pdf",defaultMessage:"Failed to generate PDF file. Please try with a smaller diagram or download an SVG file."}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.onDownloadPng=Object(w.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(E("download_png"),t.prev=1,t.t0=e.chartRef,!t.t0){t.next=6;break}return t.next=6,e.chartRef.downloadPng();case 6:t.next=11;break;case 8:t.prev=8,t.t1=t.catch(1),e.showErrorPopup(e.context.intl.formatMessage({id:"error.failed_png",defaultMessage:"Failed to generate PNG file. Please try with a smaller diagram or download an SVG file."}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.onDownloadSvg=function(){E("download_svg"),e.chartRef&&e.chartRef.downloadSvg()},e.onDismissErrorPopup=function(){e.setState(Object.assign({},e.state,{showErrorPopup:!1}))},e.renderMainArea=function(){switch(e.state.state){case rn.SHOWING_CHART:case rn.LOADING_MORE:return Object(W.jsxs)("div",{id:"content",children:[Object(W.jsx)(sn,{open:e.state.showErrorPopup,message:e.state.error,onDismiss:e.onDismissErrorPopup}),e.state.state===rn.LOADING_MORE?Object(W.jsx)(Qe.a,{active:!0,size:"small",className:"loading-more"}):null,Object(W.jsx)(Z,{data:e.state.data.chartData,selection:e.state.selection,chartType:e.state.chartType,onSelection:e.onSelection,freezeAnimation:e.state.freezeAnimation,ref:function(t){return e.chartRef=t}}),e.state.showSidePanel?Object(W.jsx)(L.a,{minWidth:768,id:"sidePanel",children:Object(W.jsx)(Re,{gedcom:e.state.data.gedcom,indi:e.state.selection.id})}):null]});case rn.ERROR:return Object(W.jsx)(on,{message:e.state.error});case rn.INITIAL:case rn.LOADING:return Object(W.jsx)(Qe.a,{active:!0,size:"large"})}},e}return Object(x.a)(n,[{key:"updateDisplay",value:function(e,t){var n,r;(!this.state.selection||this.state.selection.id!==e.id||this.state.selection.generation!==e.generation||(n=this.state,(r=t)&&Object.entries(r).some((function(e){var t=Object(D.a)(e,2),r=t[0],a=t[1];return void 0!==a&&n[r]!==a}))))&&this.setState(Object.assign({},this.state,{selection:e},t))}},{key:"setError",value:function(e){this.setState(Object.assign({},this.state,{state:rn.ERROR,error:e}))}},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"isNewData",value:function(e,t){if(!this.state.sourceSpec||this.state.sourceSpec.source!==e.source)return!0;var n={spec:e,selection:t},r={spec:this.state.sourceSpec,selection:this.state.selection};switch(n.spec.source){case nn.UPLOADED:return this.uploadedDataSource.isNewData(n,r,this.state.data);case nn.GEDCOM_URL:return this.gedcomUrlDataSource.isNewData(n,r,this.state.data);case nn.WIKITREE:return this.wikiTreeDataSource.isNewData(n,r,this.state.data);case nn.EMBEDDED:return this.embeddedDataSource.isNewData(n,r,this.state.data)}}},{key:"loadData",value:function(e,t){switch(e.source){case nn.UPLOADED:return this.uploadedDataSource.loadData({spec:e,selection:t});case nn.GEDCOM_URL:return this.gedcomUrlDataSource.loadData({spec:e,selection:t});case nn.WIKITREE:return this.wikiTreeDataSource.loadData({spec:e,selection:t});case nn.EMBEDDED:return this.embeddedDataSource.loadData({spec:e,selection:t})}}},{key:"componentDidUpdate",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,n,r,a,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/view"===this.props.location.pathname){e.next=3;break}return this.state.state!==rn.INITIAL&&this.setState(Object.assign({},this.state,{state:rn.INITIAL})),e.abrupt("return");case 3:if((t=cn(this.props.location)).sourceSpec){e.next=8;break}this.props.history.replace({pathname:"/"}),e.next=38;break;case 8:if(this.state.state!==rn.INITIAL&&!this.isNewData(t.sourceSpec,t.selection)){e.next=22;break}return this.setState(Object.assign({},this.state,{state:rn.LOADING,sourceSpec:t.sourceSpec,selection:t.selection,standalone:t.standalone,chartType:t.chartType})),e.prev=10,e.next=13,this.loadData(t.sourceSpec,t.selection);case 13:n=e.sent,this.setState(Object.assign({},this.state,{state:rn.SHOWING_CHART,data:n,selection:Me(n.chartData,t.selection),showSidePanel:t.showSidePanel})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),this.setError((s=e.t0,c=this.context.intl,s instanceof ne?c.formatMessage({id:"error.".concat(s.code),defaultMessage:s.message},s.args):s.message));case 20:e.next=38;break;case 22:if(this.state.state!==rn.SHOWING_CHART&&this.state.state!==rn.LOADING_MORE){e.next=38;break}if(r=Me(this.state.data.chartData,t.selection),a=t.sourceSpec.source===nn.WIKITREE&&(!this.state.selection||this.state.selection.id!==r.id),this.updateDisplay(r,{chartType:t.chartType,state:a?rn.LOADING_MORE:rn.SHOWING_CHART}),!a){e.next=38;break}return e.prev=27,e.next=30,Rt(t.selection.id,this.context.intl);case 30:i=e.sent,o=Me(i.chartData,t.selection),this.setState(Object.assign({},this.state,{state:rn.SHOWING_CHART,data:i,selection:o})),e.next=38;break;case 35:e.prev=35,e.t1=e.catch(27),this.showErrorPopup(this.context.intl.formatMessage({id:"error.failed_wikitree_load_more",defaultMessage:"Failed to load data from WikiTree. {error}"},{error:e.t1}),{state:rn.SHOWING_CHART});case 38:case"end":return e.stop()}var s,c}),e,this,[[10,17],[27,35]])})));return function(){return e.apply(this,arguments)}}()},{key:"showErrorPopup",value:function(e,t){this.setState(Object.assign({},this.state,{showErrorPopup:!0,error:e},t))}},{key:"render",value:function(){var e=this;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)($e.b,{render:function(t){var n,r;return Object(W.jsx)(an,Object(b.a)(Object(b.a)({},t),{},{data:e.state.data&&e.state.data.chartData,allowAllRelativesChart:(null===(n=e.state.sourceSpec)||void 0===n?void 0:n.source)!==nn.WIKITREE,showingChart:"/view"===e.props.history.location.pathname&&(e.state.state===rn.SHOWING_CHART||e.state.state===rn.LOADING_MORE),standalone:e.state.standalone,eventHandlers:{onSelection:e.onSelection,onPrint:e.onPrint,onDownloadPdf:e.onDownloadPdf,onDownloadPng:e.onDownloadPng,onDownloadSvg:e.onDownloadSvg},showWikiTreeMenus:(null===(r=e.state.sourceSpec)||void 0===r?void 0:r.source)===nn.WIKITREE}))}}),Object(W.jsxs)($e.d,{children:[Object(W.jsx)($e.b,{exact:!0,path:"/",component:Je}),Object(W.jsx)($e.b,{exact:!0,path:"/view",render:this.renderMainArea}),Object(W.jsx)($e.a,{to:"/"})]})]})}}]),n}(l.Component);un.contextTypes={intl:j.d};var ln=n(249);n(382),n(383),n(384);Object(j.c)([].concat(Object(r.a)(a),Object(r.a)(i),Object(r.a)(o),Object(r.a)(s),Object(r.a)(c),Object(r.a)(u)));var dn={de:p,fr:h,it:f,pl:m,ru:g},pn=navigator.language&&navigator.language.split(/[-_]/)[0],hn=Object(ln.a)();hn&&"ie"===hn.name?d.render(Object(W.jsx)("p",{children:"Topola Genealogy Viewer does not support Internet Explorer. Please try a different (modern) browser."}),document.querySelector("#root")):d.render(Object(W.jsx)(j.b,{locale:pn,messages:dn[pn],children:Object(W.jsx)(Ke.a,{children:Object(W.jsx)($e.b,{component:un})})}),document.querySelector("#root"))}},[[385,1,3]]]);
//# sourceMappingURL=main.033f4890.chunk.js.map